<HTML>
<head>
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
<META HTTP-EQUIV="Expires" CONTENT="-1">
<meta http-equiv="content-type" content="text/html; charset=windows-1250">
<link rel="stylesheet" type="text/css" href="css/main.css">
<title>numery kont</title>
		<script src="../../lib/jquery.min.js" type="text/javascript"></script>


<style>
<!--
div.bank_account
{
display: none;
font-weight: bold;
color: #aa0000;
}
--></style>		
		
<script language="JavaScript"> <!--

function start_appl()
{
	//alert("done");
}

function isInteger (s)
   {
      var i;

      if (isEmpty(s))
      if (isInteger.arguments.length == 1) return 0;
      else return (isInteger.arguments[1] == true);

      for (i = 0; i < s.length; i++)
      {
         var c = s.charAt(i);

         if (!isDigit(c)) return false;
      }

      return true;
   }

function isEmpty(s)
   {
      return ((s == null) || (s.length == 0))
   }

function isDigit (c)
   {
      return ((c >= "0") && (c <= "9"))
   }


function check_id(v_id)
{
	if (isInteger(v_id) == false)
		{
		$("div.bank_account").fadeOut(1).html("Wpisana wartosc nie jest liczba! Mozesz wpisywac powyzej tylko cyfry!").fadeIn(1);
		}
	else if ((v_id+'').length!=11)
		{
		$("div.bank_account").fadeOut(1).html("ID clienta musi skladac sie dokladnie z 11 cyfr.").fadeIn(1);
		}
	else
		{
		v_o=gen1(v_id);
		$("div.bank_account").fadeOut(1).html("Nr konta klienta: "+v_o).fadeIn();
		}
} 

function gen1(v_g1)
{
v_g2 = "1140156015301" + GEN_ID_CRC(v_g1);
v_g2 = '' + GENCrC(v_g2) + v_g2;
return v_g2;
}

function GEN_ID_CRC(v_g3)
{
res = 0;
v_g3=''+v_g3;
ID_new = v_g3.substring(1);
wages = Array(1, 3, 5, 7, 1, 3, 5, 7, 1, 3);
id_length = ID_new.length;

for(i=0;i<=9;i++)
	{
	ID_part = ID_new.substring(i,i+1);
	x=parseInt(ID_part);
	y=parseInt(wages[i]);
	res = res+(x*y);
	}

res = parseInt(res % 11);

if (res == 10)
	{
	v_o3 = '' + ID_new + "0";
	}
else
	{
	v_o3 = '' + ID_new + res;
	}

return v_o3;
}

function GENCrC(v_g4)
{

t_1=''+v_g4;

if (t_1.length != 24)
	{
	alert("Zla dlugosc numeru konta - prawidlowa to 24 znaki");
	v_o4 = "-1";
	}
else
	{
 
	country_code = '' + "2521" + "00";
	account = '' + v_g4 + country_code;
	mod_w = 0;

	for(i=0;i<account.length;i+=6)
		{
		part_account = account.substring(i,i+6);
		mod_w = ('' + mod_w + part_account)
		//mod_w = parseInt(mod_w);
		mod_w = mod_w % 97;
		
		}
	mod_w = 98 - mod_w;
	
	if (mod_w < 10)
		{
		v_o4 = '' + "0" + mod_w;
		}
	else
		{
		v_o4 = mod_w;
		}

	}


return v_o4;
}





--></script>

		
</head>
<body bgcolor="ffffbb" onLoad="start_appl();">
<center>
<FORM id="f1" class="f1" onSubmit="return(false);">
<TABLE align="center" class="f1">
<TR class="f1"><TD align='right' class="f1">WPROWADZ NUMER KLIENTA (ACCOUNT_ID -> 11 cyfr):</TD><TD><input class="f1" type='text' name='client_id' value='' id='client_id' onKeyUp="check_id(this.value);"></TD></TR>
</TABLE>
</FORM>
<div class="bank_account" id="bank_account">swsws</div>
</center>



</HTML>
